from classes.polynomial import Polynomial as P
p0 = (P(), P(), P(), P(), P(0,2,-3, 1))
p1 = (P(), P(), P(), P(0,2,-3, 1), P(0,-6,11,-6,1))
p2 = (P(0,-4,8,-5,1), P(0,12,-28,23,-8,1), P(0,12,-28,23,-8,1), P(0,18,-39,29,-9,1), P(0,-54,135,-126,56,-12,1))
p3 = (
    P(0,-308,1016,-1381,1013,-437,112,-16,1),
    P(0, 708,-2600,4061,-3557, 1926, -665, 144,-18, 1),
    P(0, 708,-2600,4061,-3557, 1926, -665, 144,-18, 1),
    P(0, 1170, -4047, 5917, - 4839, 2447, -791, 161, - 19, 1),
    P(0,-2790, + 10599, - 17458, + 16556, - 10054, + 4085, - 1117, + 199,-21,1)
)

def get_next111(p):
    return p[0]*p[0] / P(0, 1) + p[3] * p[3] / P(0, -1, 1)

def get_next123(p):
    q1 = p[-1] * p[-1] / (P(0,1)*P(-1,1)*P(-2,1)) *P(-3,1)
    q2 = 2 * p[-1]*p[1] / P(0,-1,1)
    q3 = p[1]*p[1] / P(0,-1,1)*P(-2,1)
    return q1+q2+q3

print(get_next123(p3))


# -4x + 8x^2 - 5x^3 + x^4
# 12x - 28x^2 + 23x^3 - 8x^4 + x^5
# 12x - 28x^2 + 23x^3 - 8x^4 + x^5
# 18x - 39x^2 + 29x^3 - 9x^4 + x^5
# -54x + 135x^2 - 126x^3 + 56x^4 - 12x^5 + x^6